Locations:
  slac:
    name: SLAC
    bucket: rubintv_data_slac
    logo: SLAC_Logo.svg
    camera_groups:
      Cameras: [ slac_lsstcam, ts8 ]
    services: []

  tucson:
    name: Tucson
    bucket: rubintv_data_tts
    logo: cactus.svg
    camera_groups:
      Cameras: [ auxtel, fake_auxtel, comcam ]
      Telescopes: [ tma ]
    services: [ auxtel, comcam, misc ]

  summit:
    name: Summit
    bucket: rubintv_data
    logo: Summit.jpg
    camera_groups:
      Telescope Mounted: [ auxtel, comcam, lsstcam ]
      Other Cameras: [ allsky, startracker, startracker-wide, startracker-fast ]
      Telescopes: [ tma ]
    services: [ auxtel, startracker, allsky, comcam, misc ]


Cameras:
  tma:
    name: TMA
    online: true
    channels:
      tma_mount_motion_profile:
        name: Mount motion profile
        prefix: tma_mount_motion_profile
      tma_m1m3_hardpoint_profile:
        name: M1M3 HP and Slew Profile
        prefix: tma_m1m3_hardpoint_profile
    js_entry: auxtel

  auxtel:
    name: AuxTel
    online: True
    night_report_prefix: auxtel_night_reports
    js_entry: auxtel
    channels:
      monitor:
        name: Monitor
        prefix: auxtel_monitor
        service_dependency: auxtel_isr_runner
      im:
        name: Image Analysis
        label: ImAnalysis
        prefix: summit_imexam
        service_dependency: auxtel_isr_runner
      spec:
        name: Spectrum
        prefix: summit_specexam
        service_dependency: auxtel_isr_runner
      mount:
        name: Mount
        prefix: auxtel_mount_torques
    per_day_channels:
      movie:
        name: Tonight's Movie
        prefix: auxtel_movies
        label: "Movie for "
    image_viewer_link: "http://ccs.lsst.org/FITSInfo/view.html?\
    image=AT_O_{day_obs}_{seq_num:06}\
    &raft=R00&color=grey&bias=Simple+Overscan+Correction\
    &scale=Per-Segment&source=RubinTV"

  startracker:
    name: StarTracker
    online: True
    channels:
      startracker:
        name: StarTracker
        prefix: startracker_raw
      analysis:
        name: Analysis
        prefix: startracker_analysis
    night_report_prefix: startracker_night_reports
    js_entry: startracker

  startracker-wide:
    name: StarTracker Wide
    online: True
    metadata_slug: startracker
    channels:
      startracker-wide:
        name: StarTracker Wide
        prefix: startracker_wide_raw
        label: ST Wide
      startracker-wide-analysis:
        name: Wide Analysis
        prefix: startracker_wide_analysis
        label: ST Wide Analysis
    night_report_prefix: startracker_night_reports
    js_entry: startracker

  startracker-fast:
    name: StarTracker Fast
    online: True
    metadata_slug: startracker
    channels:
      startracker-fast:
        name: StarTrackerFast
        prefix: startracker_fast_raw
      startracker-fast-analysis:
        name: Analysis
        prefix: startracker_fast_analysis
    night_report_prefix: startracker_night_reports
    js_entry: startracker

  allsky:
    name: All Sky
    online: True
    channels:
      movie:
        name: Current Movie
        prefix: all_sky_movies
      image:
        name: Current Image
        prefix: all_sky_current
    js_entry: allsky

  comcam:
    name: ComCam
    online: True
    channels:
      focal_plane_mosaic:
        name: Focal Plane mosaic
        prefix: comcam_focal_plane_mosaic
      noise_map:
        name: Noise Map
        prefix: comcam_noise_map
    js_entry: auxtel
    image_viewer_link: "http://ccs.lsst.org/FITSInfo/\
    view.html?image=CC_O_{day_obs}_{seq_num:06}"

  lsstcam:
    name: LSSTCam
    online: False

  slac_lsstcam:
    name: LSSTCam
    online: True
    channels:
      focal_plane_mosaic:
        name: Focal Plane mosaic
        prefix: slac_lsstcam_focal_plane_mosaic
      noise_map:
        name: Noise Map
        prefix: slac_lsstcam_noise_map
      photodiode_profile:
        name: Photodiode profile
        prefix: slac_lsstcam_photodiode_profile
      ccob_analysis:
        name: CCOB Analysis
        prefix: slac_lsstcam_ccob_analysis
    js_entry: auxtel
    logo: slac_lsstcam.png
    night_report_prefix: slac_lsstcam_night_reports
    night_report_label: Trending Plots
    image_viewer_link: "https://lsst-camera-dev.slac.stanford.edu/FITSInfo/\
    view.html?image=MC_C_{day_obs}_{seq_num:06}"


  ts8:
    name: TS8
    online: True
    channels:
      focal_plane_mosaic:
        name: Focal Plane mosaic
        prefix: ts8_focal_plane_mosaic
      noise_map:
        name: Noise Map
        prefix: ts8_noise_map
    js_entry: auxtel
    logo: ts8.png
    image_viewer_link: "https://lsst-camera-dev.slac.stanford.edu/\
    FITSInfo/view.html?image=TS_C_{day_obs}_{seq_num:06}"
    night_report_prefix: ts8_night_reports
    night_report_label: Trending Plots


  fake_auxtel:
    name: Fake Auxtel
    online: True
    night_report_prefix: fake_auxtel_night_reports
    js_entry: auxtel
    channels:
      monitor:
        name: Monitor
        prefix: fake_auxtel_monitor
        service_dependency: fake_auxtel_isr_runner
      im:
        name: Image Analysis
        label: ImAnalysis
        prefix: fake_summit_imexam
        service_dependency: fake_auxtel_isr_runner
      spec:
        name: Spectrum
        prefix: fake_summit_specexam
        service_dependency: fake_auxtel_isr_runner
      mount:
        name: Mount
        prefix: fake_auxtel_mount_torques
    per_day_channels:
      movie:
        name: Tonight's Movie
        prefix: fake_auxtel_movies
        label: "Movie for "
    image_viewer_link: "http://ccs.lsst.org/FITSInfo/view.html?\
    image=AT_O_{day_obs}_{seq_num:06}\
    &raft=R00&color=grey&bias=Simple+Overscan+Correction\
    &scale=Per-Segment&source=RubinTV"



Services:
  auxtel:
    display_name: AuxTel
    channels: auxtel
    services:
      auxtel_metadata: Metadata
      auxtel_isr_runner: ISR Runner

  startracker:
    display_name: StarTracker
    channels: startracker
    services:
      startracker_metadata: Metadata

  allsky:
    display_name: All Sky
    services:
      allsky: All Sky

  comcam:
    display_name: ComCam
    channels: comcam

  misc:
    display_name: Misc Services
    services:
      backgroundService: Background


MetadataHeadings:
  fake_auxtel:
    Exposure log entries:
      Any exposure log entries which have been made, click to pop out the details
    Mount motion image degradation:
      An estimate of the degradation of the PSF, in arcseconds, due mount tracking issues
    Exposure time:
      The image exposure time
    Image type:
      The image type, e.g. bias, dark, flat etc
    Target:
      The name of the target in the exposure
    Filter:
      The filter in use for the image, or `empty` if none
    Disperser:
      The dispersive element in use for the image, or `empty` if none
    Airmass:
      The airmass of the observation
    TAI:
      The TAI of the observation
    DIMM Seeing:
      The seeing, as measured by the DIMM, if available
  slac_lsstcam:
    Run number:
      The run number, as taken from the exposure record's science_program field
    Exposure time:
      The image exposure time
    Dark time:
      The image dark time
    Image type:
      The image type, e.g. bias, dark, flat etc
    Test type:
      The type of test being run, e.g. superflats
    Carriage axis B:
      "Camera coordinate value for carriage axis B of CCOB-Narrow projector [deg] - Source: (CATKW101-$CCOBBCAM)"
    Carriage axis U:
      "Camera coordinate value for carriage axis U of CCOB-Narrow projector [deg] - Source: (CATKW103-$CCOBUCAM)"
    Incidence angle FP:
      "Incidence angle of beam surface FP [deg] - Source: (CATKW10D-$FP_inc)"
    FP x-coord:
      "Camera Coordinate System x coordinate of beam at surface FP [mm] - Source: (CATKW10E-$FP_pos_x)"
    FP y-coord:
      "Camera Coordinate System y coordinate of beam at surface FP [mm] - Source: (CATKW10F-$FP_pos_y)"
    Incidence angle FS1:
      "Incidence angle of beam surface FS1 [deg] - Source: (CATKW110-$FS1_inc)"
    Convergence test:
      "Convergence test between target and raytraced position at focal plane for plan [mm] - Source: (CATKW128-$best)"
    Shutter open (requested):
      "High speed shutter requested open time [sec] - Source: (CATKW129-$expose)"
    Exptime (requested):
      "Requested focal plane exposure time [sec] - Source: (CATKW12A-$exptime)"
    Filter model:
      "Filter optic model used for computing this CCOB beam pointing [ugrizy	none - Source: (CATKW12B-$filter)"
    CCOB catalog exposure id:
      "Unique CCOB-narrow exposure catalog entry ID number for registration [hex] - Source: (CATKW12C-$id)"
    Hyperchromator wavelength:
      "Hyperchromator setting for wavelength output [nm] - Source: (CATKW12D-$lambda)"
    Sensor address:
      "Sensor address used in computing target for this CCOB beam pointing	 [Rij_Skl[_Cmn] - Source: (CATKW130-$sens)"
    Target photon level:
      "Target photon level target for this exposure's flat top section of CCOB-narrow beam - cf. local calibration file vs. plan file [inc.phot/pixel] - Source: (CATKW131-$target_phot_per_pix)"

  ts8:
    Run number:
      The run number, as taken from the exposure record's science_program field
    Exposure time:
      The image exposure time
    Dark time:
      The image dark time
    Image type:
      The image type, e.g. bias, dark, flat etc
    Test type:
      The type of test being run, e.g. superflats etc
  auxtel:
    Exposure log entries:
      Any exposure log entries which have been made, click to pop out the details
    Mount motion image degradation:
      An estimate of the degradation of the PSF, in arcseconds, due mount tracking issues
    Exposure time:
      The image exposure time
    Image type:
      The image type, e.g. bias, dark, flat etc
    Target:
      The name of the target in the exposure
    Filter:
      The filter in use for the image, or `empty` if none
    Disperser:
      The dispersive element in use for the image, or `empty` if none
    Airmass:
      The airmass of the observation
    TAI:
      The TAI of the observation
    DIMM Seeing:
      The seeing, as measured by the DIMM, if available
  startracker:
    Header values:
      Exposure Time:
        The image exposure time
      MJD:
        The MJD of the observation
      UTC:
        The UTC of the observation - currently misreported, it is actually TAI
      Ra:
        The commanded ra from the header, i.e. from the pointing component
      Dec:
        The commanded dec from the header, i.e. from the pointing component
      Alt:
        The average alt from the header, i.e. from the pointing component, calculated as the simple average of the start and end positions.
      Az:
        The average az from the header, i.e. from the pointing component, calculated as the simple average of the start and end positions.
    Astrometric fit:
      nSources:
        The total number of sources detected in the image
      nSources filtered:
        The total number of sources passed to the fitter
      Calculated Ra:
        The calculated ra from the astrometric fit
      Calculated Dec:
        The calculated dec from the astrometric fit
      Delta Ra Arcsec:
        The difference between the commanded and fitted ra, in arcseconds
      Delta Dec Arcsec:
        The difference between the commanded and fitted dec, in arcseconds
      Calculated Alt:
        The calculated alt from the astrometric fit. The alt and az are calculated from the fitted ra and dec using astropy, and currently applying nominal refraction correction, i.e. with default values for the pressure, temperature and relative humidity.
      Calculated Az:
        The calculated az from the astrometric fit. The alt and az are calculated from the fitted ra and dec using astropy, and currently applying nominal refraction correction, i.e. with default values for the pressure, temperature and relative humidity.
      Delta Alt Arcsec:
        The difference between the commanded and fitted alt, in arcseconds
      Delta Az Arcsec:
        The difference between the commanded and fitted az, in arcseconds
      Delta Rot Arcsec:
        The difference between the commanded and fitted rotator angle, in arcseconds. Note that as we don't have a rotator, this is more or less arbitrary.
      RMS scatter arcsec:
        The RMS distance between the measured position of each source and its position in the catalog, in arcseconds
      RMS scatter pixels:
        The RMS distance between the measured position of each source and its position in the catalog, in pixels
  startracker-wide:
    Star Tracker Wide:
      Exposure Time wide:
        The image exposure time
      MJD:
        The MJD of the observation
      UTC:
        The UTC of the observation - currently misreported, it is actually TAI
      Ra wide:
        The commanded ra from the header, i.e. from the pointing component
      Dec wide:
        The commanded dec from the header, i.e. from the pointing component
      Alt wide:
        The average alt from the header, i.e. from the pointing component, calculated as the simple average of the start and end positions.
      Az wide:
        The average az from the header, i.e. from the pointing component, calculated as the simple average of the start and end positions.
    Star Tracker Solve Wide:
      nSources wide:
        The total number of sources detected in the image
      nSources filtered wide:
        The total number of sources passed to the fitter
      Calculated Ra wide:
        The calculated ra from the astrometric fit
      Calculated Dec wide:
        The calculated dec from the astrometric fit
      Delta Ra Arcsec wide:
        The difference between the commanded and fitted ra, in arcseconds
      Delta Dec Arcsec wide:
        The difference between the commanded and fitted dec, in arcseconds
      Calculated Alt wide:
        The calculated alt from the astrometric fit. The alt and az are calculated from the fitted ra and dec using astropy, and currently applying nominal refraction correction, i.e. with default values for the pressure, temperature and relative humidity.
      Calculated Az wide:
        The calculated az from the astrometric fit. The alt and az are calculated from the fitted ra and dec using astropy, and currently applying nominal refraction correction, i.e. with default values for the pressure, temperature and relative humidity.
      Delta Alt Arcsec wide:
        The difference between the commanded and fitted alt, in arcseconds
      Delta Az Arcsec wide:
        The difference between the commanded and fitted az, in arcseconds
      Delta Rot Arcsec wide:
        The difference between the commanded and fitted rotator angle, in arcseconds. Note that as we don't have a rotator, this is more or less arbitrary.
      RMS scatter arcsec wide:
        The RMS distance between the measured position of each source and its position in the catalog, in arcseconds
      RMS scatter pixels wide:
        The RMS distance between the measured position of each source and its position in the catalog, in pixels
  startracker-fast:
    Star Tracker Fast:
      Exposure Time fast:
        The image exposure time
      MJD:
        The MJD of the observation
      UTC:
        The UTC of the observation - currently misreported, it is actually TAI
      Ra fast:
        The commanded ra from the header, i.e. from the pointing component
      Dec fast:
        The commanded dec from the header, i.e. from the pointing component
      Alt fast:
        The average alt from the header, i.e. from the pointing component, calculated as the simple average of the start and end positions.
      Az fast:
        The average az from the header, i.e. from the pointing component, calculated as the simple average of the start and end positions.
    Star Tracker Solve Fast:
      nSources fast:
        The total number of sources detected in the image
      nSources filtered fast:
        The total number of sources passed to the fitter
      Calculated Ra fast:
        The calculated ra from the astrometric fit
      Calculated Dec fast:
        The calculated dec from the astrometric fit
      Delta Ra Arcsec fast:
        The difference between the commanded and fitted ra, in arcseconds
      Delta Dec Arcsec fast:
        The difference between the commanded and fitted dec, in arcseconds
      Calculated Alt fast:
        The calculated alt from the astrometric fit. The alt and az are calculated from the fitted ra and dec using astropy, and currently applying nominal refraction correction, i.e. with default values for the pressure, temperature and relative humidity.
      Calculated Az fast:
        The calculated az from the astrometric fit. The alt and az are calculated from the fitted ra and dec using astropy, and currently applying nominal refraction correction, i.e. with default values for the pressure, temperature and relative humidity.
      Delta Alt Arcsec fast:
        The difference between the commanded and fitted alt, in arcseconds
      Delta Az Arcsec fast:
        The difference between the commanded and fitted az, in arcseconds
      Delta Rot Arcsec fast:
        The difference between the commanded and fitted rotator angle, in arcseconds. Note that as we don't have a rotator, this is more or less arbitrary.
      RMS scatter arcsec fast:
        The RMS distance between the measured position of each source and its position in the catalog, in arcseconds
      RMS scatter pixels fast:
        The RMS distance between the measured position of each source and its position in the catalog, in pixels
  comcam:
    Exposure time:
      The image exposure time
    Dark time:
      The image dark time
    Image type:
      The image type, e.g. bias, dark, flat etc
    Test type:
      The type of test being run, e.g. superflats etc

  tma:
    Event version number:
      The code version which generated the event. Events only necessarily have the same timespans when their version numbers match!
    Event type:
        The type of event, i.e. was it a regular move (MOVING) or were we tracking the sky (TRACKING)?
    End reason:
        Why did the event end? Did we turn off, stop, go to fault, or change movement type?
    Duration:
        The duration of the event, in seconds.
    Time UTC:
        The start time of the event, as a UTC time string.
    Elevation start:
        The starting elevation value, in degrees.
    Elevation move:
        The total net elevation move, in degrees.
    Largest elevation torque:
        The largest elevation torque during the event, in Nm, including its sign. So, if the largest toque magnitude is a negative one, it will be a large negative value, if the largest toque seen was positive, it will be large and positive.
    Azimuth start:
        The starting azimuth value, in degrees.
    Azimuth move:
        The total net azimuth move, in degrees.
    Largest azimuth torque:
        The largest azimuth torque during the event, in Nm, including its sign. So, if the largest toque magnitude is a negative one, it will be a large negative value, if the largest toque seen was positive, it will be large and positive.
